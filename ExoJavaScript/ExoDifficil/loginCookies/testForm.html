<!DOCTYPE html>
 <html>
    <head>
        <title> Cookie Bootstrap</title>
        <meta charset='utf-8'>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" type="text/css" href="../node_modules/bootstrap/dist/css/bootstrap.min.css"/>
     </head>
     <body>
         <div class="container">
             <h1>Formulaires</h1>
             <form class="needs-validation" novalidate>
                 <div class="form-row">
                     <div class="col-md-4 mb-3">
                         <label for="prenom">Prénom</label>
                         <input type="text" class="form-control" id="prenom" placeholder="Pierre" required>
                         <div class="valid-feedback">Ok !</div>
                         <div class="invalid-feedback">Valeur incorrecte</div>
                     </div>
                     <div class="col-md-4 mb-3">
                         <label for="nom">Nom de famille</label>
                         <input type="text" class="form-control" id="nom" placeholder="Giraud" required>
                         <div class="valid-feedback">Ok !</div>
                         <div class="invalid-feedback">Valeur incorrecte</div>
                     </div>
                     <div class="col-md-4 mb-3">
                         <label for="pseudo">Pseudo</label>
                         <input type="text" class="form-control" id="pseudo" placeholder="PierreGird" required>
                         <div class="valid-feedback">Ok !</div>
                         <div class="invalid-feedback">Valeur incorrecte</div>
                     </div>
                 </div>
                 <div class="form-row">
                     <div class="col-md-6 mb-3">
                         <label for="ville">Ville</label>
                         <input type="text" class="form-control" id="ville" placeholder="Ville" required>
                         <div class="valid-feedback">Ok !</div>
                         <div class="invalid-feedback">Valeur incorrecte</div>
                     </div>
                     <div class="col-md-3 mb-3">
                         <label for="pays">Pays</label>
                         <input type="text" class="form-control" id="pays" placeholder="Pays" required>
                         <div class="valid-feedback">Ok !</div>
                         <div class="invalid-feedback">Valeur incorrecte</div>
                     </div>
                     <div class="col-md-3 mb-3">
                         <label for="cp">Code postal</label>
                         <input type="number" class="form-control" id="cp" placeholder="Code postal" required>
                         <div class="valid-feedback">Ok !</div>
                         <div class="invalid-feedback">Valeur incorrecte</div>
                     </div>
                 </div>
                 <div class="form-group">
                     <div class="form-check">
                       <input class="form-check-input" type="checkbox" value="" id="cgu" required>
                       <label class="form-check-label" for="cgu">J'accepte les conditions générales d'utilisation et de vente</label>
                       <div class="invalid-feedback">Vous devez accepter les CGU pour continuer</div>
                     </div>
                 </div>
                 <!-- <button class="btn btn-primary" type="submit" id="bt">Envoyer</button> -->
                 <input class="btn btn-primary" type="button" value="CreatCookie" onclick="creatCookie()" id="bt"/>
                 <input class="btn btn-info" type="button" value="GetCookie" onclick="getCookie()" id="btGet"/>
                 <input class="btn btn-success" type="button" value="ClearCookie" onclick="clearCookie()" id="btClear"/>

             </form>
         </div>
         <script>
           /*La fonction principale de ce script est d'empêcher l'envoi du formulaire si un champ a été mal rempli
            *et d'appliquer les styles de validation aux différents éléments de formulaire*/
        //    (function() {
        //      'use strict';
        //      window.addEventListener('load', function() {
        //        let forms = document.getElementsByClassName('needs-validation');
        //        let validation = Array.prototype.filter.call(forms, function(form) {
        //          form.addEventListener('submit', function(event) {
        //            if (form.checkValidity() === false) {
        //              event.preventDefault();
        //              event.stopPropagation();
        //            }
        //            form.classList.add('was-validated');
        //          }, false);
        //        });
        //      }, false);
             
        //    })();

        function creatCookie() {
                    let  myArrayCookie={};
                     myArrayCookie.nom = document.querySelector("#nom").value;
                     myArrayCookie.prenom= document.querySelector("#prenom").value;
                     myArrayCookie.pseudo= document.querySelector("#pseudo").value;
                     myArrayCookie.ville = document.querySelector("#ville").value;
                     myArrayCookie.pays = document.querySelector("#pays").value;
                     myArrayCookie.cp = document.querySelector("#cp").value;
                 
                   let myJsonCookie =  JSON.stringify(myArrayCookie);
                   document.cookie = "myJson="+ myJsonCookie;
                }
                function getCookie() {
                
                    let myArrayCookie = document.cookie.split("=") // convertir  en  tableau
                    let myObjetCookie = JSON.parse(myArrayCookie[1]); // convertir en objet
                   // console.log(myObjetCookie)
                    document.querySelector("#nom").value = myObjetCookie.nom;
                    document.querySelector("#prenom").value=myObjetCookie.prenom;
                    document.querySelector("#pseudo").value=myObjetCookie.pseudo;
                    document.querySelector("#ville").value=myObjetCookie.ville;
                    document.querySelector("#pays").value=myObjetCookie.pays;
                    document.querySelector("#cp").value=myObjetCookie.cp;
                }

                function clearCookie() {
                     document.querySelector("#nom").value ="";
                     document.querySelector("#prenom").value="";
                     document.querySelector("#pseudo").value="";
                     document.querySelector("#ville").value="";
                     document.querySelector("#pays").value="";
                     document.querySelector("#cp").value="";
                }

         </script>
    </body>
</html>